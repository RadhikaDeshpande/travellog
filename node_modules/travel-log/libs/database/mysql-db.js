// Include mysql
var mysql    =  require('mysql');
var mongodb  = require('mongodb');
var MongoClient = mongodb.MongoClient;

// Database connection reference
var dbConnect = null;

module.exports = function(dbServer) {
  dbServer = 'openshift_mongo';

  // Return connection object if already exists
  if(dbConnectMongo !== null ) {
     return ;//dbConnectMongo;
  }

  var config = dbConfig[dbServer];

  // Fetch Prd / Dev config appropriately
  config = config.mongolab;

  connection_string = 'mongodb://' +config.username + ":" +
                          config.password + "@" +
                          config.host  + ':' +
                          config.port + '/' +
                          config.database;

  MongoClient.connect(connection_string, function (err, db) {
    if(err) {
      console.log('Unable to connect to the mongoDB server. Error:' + err);
    } else {
      console.log('Configuring scube with '+dbServer+' database at IP : '+config.host+' Port : '+config.port);
      dbConnectMongo = db; // Setting the global variable db handle
      //console.log(dbConnectMongo);
      var collection = dbConnectMongo.collection('Sample');
      return;
    }
  });
}
