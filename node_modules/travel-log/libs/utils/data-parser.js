//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// This Library has the following functions:
// 1) getDomain. This gets the domain from android data passed from
//    the device . Returns null if domain is not present in the android data
// Usage:
// var dataParser = require('sparkk-lib/parse-android-data');
// var dataParser = new parseAndroidData();
// dataParser.getDomain(androidData); 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var dataParser = function() {

  // This function is used to return the domain name
  this.getDomain = function(req) {
    var consumer_app_data = "";

    if(req.query.consumer_app_data) {

      consumer_app_data = JSON.parse(req.query.consumer_app_data);

        if(consumer_app_data.domain) {

          /*SCUBE_LOG.info("The domain from requestor is "
            +consumer_app_data.domain);*/
          return consumer_app_data.domain;
        }
    }
  }

  // This function is used to return the deviceId 
  this.getDeviceId = function(req) {
    var consumer_app_data = "";

    if(req.query.consumer_app_data) {

      consumer_app_data = JSON.parse(req.query.consumer_app_data);

      if(consumer_app_data.deviceId) {

        /*SCUBE_LOG.info("The deviceId from requester is "
          +consumer_app_data.deviceId);*/
        return consumer_app_data.deviceId;
      }
    }
  }
};
module.exports = dataParser;
