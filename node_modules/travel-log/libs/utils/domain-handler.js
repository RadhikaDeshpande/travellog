//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// This Library has one function:
// 1) setDomain. This sets the domain to genymotion if the request comes from an emulator.
//    It takes in the 'req' object and sets the localhost to 10.0.3.2 if it is genymotion.
// Usage:
// var domainHandler = require('sparkk-lib/domainHandler');
// var domainHandlerObj = new domainHandler();
// domainHandlerObj.setDomain(req); 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var domainHandler = function() {

  // This function is used to set the domain to genymotion if the request comes from emulator
  this.setDomain = function(domain) {
    var domainBefore = DEFS.CONST.LOCALHOST;
    switch(domain) {
      case "genymotion": {
        DEFS.CONST.LOCALHOST      = "10.0.3.2";
        DEFS.CONST.LOCALHOST_URL  = 'http://' + DEFS.CONST.LOCALHOST + ':3000';
        DEFS.CONST.DOMAIN_URL     = DEFS.CONST.LOCALHOST_URL;
        break;
      }
      case "avd": {
        DEFS.CONST.LOCALHOST      = "10.0.2.2";
        DEFS.CONST.LOCALHOST_URL  = 'http://' + DEFS.CONST.LOCALHOST + ':3000';
        DEFS.CONST.DOMAIN_URL     = DEFS.CONST.LOCALHOST_URL;
        break;
      }
    }
    
    if (domainBefore !== DEFS.CONST.LOCALHOST) {
      SCUBE_LOG.info("Domain changed to " + DEFS.CONST.LOCALHOST);
    }
    return;
  }

  // This function is used to get the domain 
  this.getDomain = function() {
    
      //Geny motion
      if(DEFS.CONST.LOCALHOST === "10.0.3.2") {

        return 'genymotion';

      } else if(DEFS.CONST.LOCALHOST === "10.0.2.2") {

        return 'avd';

      } else {
        //This is prd 
        return 'prd';
      }   
  }

};
module.exports = domainHandler;
